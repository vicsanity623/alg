<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Studio Custom</title>
    <link rel="manifest" href="manifest.json">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #0b0b0b; color: #e5e5e5; font-family: 'Inter', sans-serif; }
        .glass { background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); }
        .input-area { background: #1a1a1a; border-radius: 24px; }
    </style>
</head>
<body class="flex flex-col h-screen">

    <!-- Header -->
    <header class="p-4 border-b border-gray-800 flex justify-between items-center bg-black">
        <h1 class="text-xl font-bold tracking-tight text-white">MODEL_NAME <span class="text-xs text-blue-500">PRO</span></h1>
        <input id="api-url" type="text" placeholder="Enter Localtunnel URL" class="glass text-xs p-2 rounded w-64 outline-none">
    </header>

    <!-- Chat Space -->
    <div id="chat-box" class="flex-1 overflow-y-auto p-6 space-y-6">
        <!-- Messages appear here -->
    </div>

    <!-- Input Area (Grok Style) -->
    <div class="p-6 bg-black">
        <div class="max-w-4xl mx-auto input-area p-4 flex items-end gap-4 shadow-2xl">
            <textarea id="user-input" rows="1" class="w-full bg-transparent outline-none resize-none py-2" placeholder="Ask anything..."></textarea>
            <button onclick="sendMessage()" class="bg-white text-black px-6 py-2 rounded-full font-bold hover:bg-gray-200 transition">Send</button>
        </div>
        <p class="text-center text-xs text-gray-500 mt-4">Powered by Llama-CPP-Python & Google Colab</p>
    </div>

    <script>
        async function sendMessage() {
            const input = document.getElementById('user-input');
            const chatBox = document.getElementById('chat-box');
            const apiUrl = document.getElementById('api-url').value;

            if(!input.value || !apiUrl) return;

            // Append User Message
            chatBox.innerHTML += `<div class="flex justify-end"><div class="glass p-4 rounded-2xl max-w-xl">${input.value}</div></div>`;
            
            const prompt = input.value;
            input.value = '';

            try {
                const response = await fetch(`${apiUrl}/v1/chat/completions`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        messages: [{ role: "user", content: prompt }],
                        stream: false
                    })
                });
                const data = await response.json();
                const aiMsg = data.choices[0].message.content;

                // Append AI Message
                chatBox.innerHTML += `<div class="flex justify-start"><div class="p-4 rounded-2xl max-w-2xl bg-gray-900 text-gray-200 border border-gray-800">${aiMsg}</div></div>`;
                chatBox.scrollTop = chatBox.scrollHeight;
            } catch (e) {
                alert("Connection failed. Check your Localtunnel URL.");
            }
        }
    </script>
</body>
</html>